<div class="container">
  <h2>Dashboard Professeur</h2>

  <h3>Ajouter un Devoir</h3>
  <form (ngSubmit)="addAssignment()">
    <label for="assignmentTitle">Titre du devoir :</label>
    <input
      id="assignmentTitle"
      [(ngModel)]="newAssignmentTitle"
      name="assignmentTitle"
      required
    />
    <br />
    <label for="matiere">Matière :</label>
    <select
      id="matiere"
      [(ngModel)]="selectedMatiereId"
      name="matiere"
      required
    >
      <option value="-1">Sélectionnez une matière</option>
      <option *ngFor="let matiere of matieres" [value]="matiere.matiere_id">
        {{matiere.nom}}
      </option>
    </select>
    <br />
    <label for="assignmentDescription">Description du devoir :</label>
    <textarea
      id="assignmentDescription"
      [(ngModel)]="newAssignmentDescription"
      name="assignmentDescription"
      required
    ></textarea>
    <br />
    <button type="submit">Ajouter le devoir</button>
  </form>

  <h3>Devoirs Attribués</h3>
  <ul>
    <li *ngFor="let assignment of getAssignments()">
      <strong>{{ getMatiereNameById(assignment.id_matiere) }}</strong>:
      <span>{{ assignment.content }}</span>
    </li>
  </ul>

  <h3>Ajouter une Note</h3>
  <form (ngSubmit)="addGrade()">
    <label for="studentId">Étudiant :</label>
    <select
      id="studentId"
      [(ngModel)]="newStudentId"
      name="studentId"
      required
    >
      <option value="-1">Sélectionnez un étudiant</option>
      <option *ngFor="let student of students" [value]="student.user_id">
        {{getStudentFullName(student)}}
      </option>
    </select>
    <br />
    <label for="matiere">Matière :</label>
    <select
      id="matiere"
      [(ngModel)]="selectedMatiereId"
      name="matiere"
      required
    >
      <option value="-1">Sélectionnez une matière</option>
      <option *ngFor="let matiere of matieres" [value]="matiere.matiere_id">
        {{matiere.nom}}
      </option>
    </select>
    <br />
    <label for="assignmentSubject">Sujet :</label>
    <input
      id="assignmentSubject"
      [(ngModel)]="newAssignmentSubject"
      name="assignmentSubject"
      required
    />
    <br />
    <label for="studentGrade">Note :</label>
    <input
      id="studentGrade"
      type="number"
      [(ngModel)]="newStudentGrade"
      name="studentGrade" 
      required
    />
    <br />
    <button type="submit">Ajouter la note</button>
  </form>

  <h3>Notes des étudiants</h3>
  <ul>
    <li *ngFor="let note of getNotes()">
      <strong>{{ getStudentNameForNote(note.id_student) }}</strong>:
      <span>{{ note.valeur }}/20 in {{ getMatiereNameById(note.id_matiere) }}</span>
      <span>{{ note.name }}</span>
    </li>
  </ul>
</div>
